Create , allow http and https, set cloud dns


sudo apt-get -y update
sudo apt-get install -y nodejs npm
sudo apt install git




git clone https://github.com/BerangerNt/nodejs-express-skeleton.git
cd nodejs-express-skeleton/
npm install
npm run start


cd ~/
su root
sudo npm install -g pm2
pm2 start server.js




sudo apt-get install -y nginx

sudo systemctl status nginx




DONT NEED
sudo vi /etc/nginx/snippets/letsencrypt.conf



location ^~ /.well-known/acme-challenge/ {
  allow all;
  root /var/lib/letsencrypt/;
  default_type "text/plain";
  try_files $uri =404;
}
DONT NEED




sudo vi /etc/nginx/sites-available/xendelta.com.conf




# HTTP redirect to HTTPS
server {
    listen 80;
    listen [::]:80;
    
    server_name xendelta.com www.xendelta.com;
    
    return 301 https://xendelta.com$request_uri;
}

# Redirect www to non-www (HTTPS)
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    
    server_name www.xendelta.com;
    
    ssl_certificate /etc/letsencrypt/live/xendelta.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/xendelta.com/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;
    
    return 301 https://xendelta.com$request_uri;
}

# Main HTTPS server block
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    
    server_name xendelta.com;

    # SSL certificates managed by Certbot
    ssl_certificate /etc/letsencrypt/live/xendelta.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/xendelta.com/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;

    # App 1 - WebSocket route
    location /ws/ {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_read_timeout 86400;
    }

    # App 1 - Main route
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # App 2 - Example (uncomment and modify as needed)
    # location /app2/ {
    #     proxy_pass http://localhost:3001;
    #     proxy_http_version 1.1;
    #     proxy_set_header Upgrade $http_upgrade;
    #     proxy_set_header Connection "upgrade";
    #     proxy_set_header Host $host;
    #     proxy_set_header X-Real-IP $remote_addr;
    #     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    #     proxy_set_header X-Forwarded-Proto $scheme;
    #     proxy_read_timeout 86400;
    # }
}






sudo ln -s /etc/nginx/sites-available/xendelta.com.conf /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx




sudo apt install certbot python3-certbot-nginx

sudo certbot certonly --nginx -d xendelta.com -d www.xendelta.com



pm2 startup
*run code*
pm2 save


ssh-keygen -t ed25519 -C "your-email@example.com"
cat ~/.ssh/id_ed25519.pub




